<Window x:Class="ElectronicLibrary.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Электронная библиотека" Height="450" Width="800">
    <Window.Resources>
        <BooleanToVisibilityConverter x:Key="BooleanToVisibilityConverter"/>
    </Window.Resources>
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <!-- Панель поиска -->
        <StackPanel Orientation="Horizontal" Margin="10">
            <TextBox Text="{Binding SearchTerm, UpdateSourceTrigger=PropertyChanged}" Width="200" Margin="0,0,10,0"/>
            <Button Command="{Binding SearchCommand}" Content="Поиск"/>
        </StackPanel>

        <!-- Список книг -->
        <ListBox Grid.Row="1" ItemsSource="{Binding Books}" Margin="10">
            <ListBox.ItemTemplate>
                <DataTemplate>
                    <StackPanel Orientation="Horizontal">
                        <TextBlock Text="{Binding Title}" Width="200"/>
                        <TextBlock Text="{Binding Author.Name}" Width="150"/>
                        <Button Command="{Binding DataContext.BookCommand, RelativeSource={RelativeSource AncestorType=ListBox}}" 
                                CommandParameter="{Binding}" 
                                Content="Забронировать" 
                                IsEnabled="{Binding IsAvailable}"/>
                    </StackPanel>
                </DataTemplate>
            </ListBox.ItemTemplate>
        </ListBox>

        <!-- Индикатор загрузки -->
        <ProgressBar Grid.Row="1" IsIndeterminate="True" 
                     Visibility="{Binding IsLoading, Converter={StaticResource BooleanToVisibilityConverter}}"/>
    </Grid>
</Window>